
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A quasipolynomial time separating automata algorithm &#8212; Games on graphs</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="A quasipolynomial time value iteration algorithm" href="value_iteration.html" />
    <link rel="prev" title="A quasipolynomial time attractor decomposition algorithm" href="zielonka.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/cover.jpg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Games on graphs</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <p class="caption collapsible-parent">
 <span class="caption-text">
  Introduction
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../1_Introduction/index.html">
   Introduction
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../1_Introduction/intro.html">
     What is this book about?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_Introduction/simple.html">
     A first model of games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_Introduction/objectives.html">
     Objectives
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_Introduction/computation.html">
     Computational models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_Introduction/automata.html">
     Automata
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_Introduction/memory.html">
     Memory
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_Introduction/reductions.html">
     Reductions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_Introduction/subgames.html">
     Traps and subgames
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_Introduction/fixed_points.html">
     Generic fixed point algorithms
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_Introduction/value_iteration.html">
     Value iteration algorithms
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_Introduction/strategy_improvement.html">
     Strategy improvement algorithms
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_Introduction/references.html">
     Bibliographic references
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Classic
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../2_Regular/index.html">
   Regular Games
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../2_Regular/attractors.html">
     Reachability games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../2_Regular/buchi.html">
     Büchi games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../2_Regular/parity.html">
     Parity games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../2_Regular/muller.html">
     Rabin, Streett, and Muller games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../2_Regular/zielonka.html">
     Zielonka tree
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../2_Regular/references.html">
     Bibliographic references
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="index.html">
   Parity Games
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="strategy_improvement.html">
     An exponential time strategy improvement algorithm
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="zielonka.html">
     A quasipolynomial time attractor decomposition algorithm
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     A quasipolynomial time separating automata algorithm
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="value_iteration.html">
     A quasipolynomial time value iteration algorithm
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="relationships.html">
     Comparing the three families of algorithms
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="references.html">
     Bibliographic references
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../4_Payoffs/index.html">
   Games with Payoffs
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../4_Payoffs/notations.html">
     Notations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../4_Payoffs/qualitative.html">
     Refining qualitative objectives with quantities
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../4_Payoffs/mean_payoff.html">
     Mean payoff games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../4_Payoffs/discounted_payoff.html">
     Discounted payoff games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../4_Payoffs/shortest_path.html">
     Shortest path games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../4_Payoffs/total_payoff.html">
     Total payoff games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../4_Payoffs/references.html">
     Bibliographic references
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Stochastic
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../5_MDP/index.html">
   Markov Decision Processes
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../5_MDP/notations.html">
     Notations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_MDP/reachability.html">
     Positive and almost-sure reachability and safety in MDPs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_MDP/discounted.html">
     Discounted payoff in MDPs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_MDP/mean_payoff_properties.html">
     Mean-payoff in MDPs: General properties and linear programming
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_MDP/mean_payoff_strongly_connected.html">
     Mean-payoff optimality in strongly connected MDPs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_MDP/end_components.html">
     End components
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_MDP/reductions.html">
     Reductions to optimal reachability
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_MDP/optimal_reachability.html">
     Optimal reachability
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_MDP/references.html">
     Bibliographic references
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../6_Stochastic/index.html">
   Stochastic Games
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../6_Stochastic/notations.html">
     Notations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../6_Stochastic/determinacy.html">
     Positional determinacy of stochastic reachability games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../6_Stochastic/relations.html">
     Relations between all games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../6_Stochastic/algos.html">
     Algorithms
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../6_Stochastic/references.html">
     Bibliographic references
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Information
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../7_Concurrent/index.html">
   Concurrent Games
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../7_Concurrent/notations.html">
     Notations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../7_Concurrent/matrix_games.html">
     Matrix games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../7_Concurrent/discounted.html">
     Concurrent discounted games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../7_Concurrent/reachability.html">
     Concurrent reachability games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../7_Concurrent/mean_payoff.html">
     Concurrent mean-payoff games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../7_Concurrent/discounted.html">
     Concurrent discounted games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../7_Concurrent/references.html">
     Bibilographic references
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../8_Imperfect/index.html">
   Games with Signals
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../8_Imperfect/notations.html">
     Notations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../8_Imperfect/finite_duration.html">
     Finite duration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../8_Imperfect/infinite_duration.html">
     Infinite duration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../8_Imperfect/references.html">
     Bibliographic references
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Infinite
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../9_Timed/index.html">
   Timed Games
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../9_Timed/notations.html">
     Notations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../9_Timed/state_space_representation.html">
     State-Space Representation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../9_Timed/controllable_predecessor_operator.html">
     Controllable-Predecessor Operator
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../9_Timed/backward_algorithm.html">
     Backward Algorithm
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../9_Timed/forward_algorithm.html">
     Forward Algorithm
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../9_Timed/references.html">
     Bibliographic references
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../10_Pushdown/index.html">
   Pushdown Games
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../10_Pushdown/notations.html">
     Notations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../10_Pushdown/profiles.html">
     Profiles and regularity of the winning regions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../10_Pushdown/parity.html">
     Parity pushdown games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../10_Pushdown/references.html">
     Bibliographic references
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../11_Counters/index.html">
   Games with Counters
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../11_Counters/counters.html">
     Vector games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11_Counters/dim1.html">
     Games in dimension one
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11_Counters/avag.html">
     Asymmetric games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11_Counters/resource.html">
     Resource-conscious games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11_Counters/complexity.html">
     The complexity of asymmetric monotone games
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11_Counters/references.html">
     Bibliographic references
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Multi
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../12_Multiobjectives/index.html">
   Games with multiple objectives
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../12_Multiobjectives/mean_payoff_energy.html">
     Mean-payoff and energy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../12_Multiobjectives/total_payoff_shortest_path.html">
     Total-payoff and shortest path
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../12_Multiobjectives/beyond_worst_case.html">
     Beyond worst-case synthesis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../12_Multiobjectives/percentile.html">
     Percentile queries
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../12_Multiobjectives/references.html">
     Bibliographic references
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../13_Multiplayer/index.html">
   Multiplayer Games
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../13_Multiplayer/nash_equilibria_normal_form.html">
     Nash Equilibria for games in normal form
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../13_Multiplayer/admissible_strategies.html">
     Admissible strategies
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../13_Multiplayer/references.html">
     Bibliographic references
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-separation-framework">
   The separation framework
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-original-separating-automaton">
   The original separating automaton
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="a-quasipolynomial-time-separating-automata-algorithm">
<span id="sec-separation"></span><h1>A quasipolynomial time separating automata algorithm<a class="headerlink" href="#a-quasipolynomial-time-separating-automata-algorithm" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-separation-framework">
<h2>The separation framework<a class="headerlink" href="#the-separation-framework" title="Permalink to this headline">¶</a></h2>
<p>We describe a general approach for reducing parity games to safety games.
Section <a class="reference internal" href="../1_Introduction/reductions.html#sec-reductions"><span class="std std-ref">Reductions</span></a> constructs reductions between objectives using automata:
in the case at hand parity reduces to safety if there exists a deterministic automaton <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> over the alphabet <span class="math notranslate nohighlight">\([1,d]\)</span>
with acceptance objective <span class="math notranslate nohighlight">\(\mathtt{Safe}\)</span> and defining <span class="math notranslate nohighlight">\(\mathtt{Parity}([1,d])\)</span>,
meaning <span class="math notranslate nohighlight">\(L( \mathbf{A}) =  \mathtt{Parity}([1,d])\)</span>.
With such an automaton in hand <a class="reference internal" href="../1_Introduction/reductions.html#1-lem:automata_reduction">Lemma 20</a> implies the following reduction:
from a parity game <span class="math notranslate nohighlight">\(\mathcal{G}\)</span> construct the safety game <span class="math notranslate nohighlight">\(\mathcal{G} \times  \mathbf{A}\)</span> satisfying that
Eve has a winning strategy in <span class="math notranslate nohighlight">\(\mathcal{G}\)</span> from <span class="math notranslate nohighlight">\(v_0\)</span> if and only if she has a winning strategy in <span class="math notranslate nohighlight">\(\mathcal{G} \times  \mathbf{A}\)</span> from <span class="math notranslate nohighlight">\((v_0,q_0)\)</span>.</p>
<p>Unfortunately, it can be shown (using a topological argument) that there is no such automaton.
The separation framework defines a (weaker) sufficient condition for the reduction above to be correct.
Instead of insisting that <span class="math notranslate nohighlight">\(L( \mathbf{A}) =  \mathtt{Parity}([1,d])\)</span>,
it is enough to have <span class="math notranslate nohighlight">\(W_\mathrm{Eve}( \mathcal{A}, \mathtt{Parity}[ \mathfrak{c}]) =  W_\mathrm{Eve}( \mathcal{A},L( \mathbf{A})[ \mathfrak{c}])\)</span>.
To ensure this equality we will only require that <span class="math notranslate nohighlight">\(L( \mathbf{A})\)</span> <strong>separates</strong> winning plays from losing plays.
The two <strong>key</strong> ideas are first to take advantage of the positionality of parity objectives
by restricting further winning plays to <strong>positional</strong> winning plays,
and second to state <span class="math notranslate nohighlight">\(W_\mathrm{Eve}( \mathcal{A}, \mathtt{Parity}[ \mathfrak{c}]) =  W_\mathrm{Eve}( \mathcal{A},L( \mathbf{A})[ \mathfrak{c}])\)</span> not for all parity games,
but only for parity games with <span class="math notranslate nohighlight">\(n\)</span> vertices and priorities in <span class="math notranslate nohighlight">\([1,d]\)</span>.</p>
<p>A deterministic safety automaton over the alphabet <span class="math notranslate nohighlight">\([1,d]\)</span> is given by</p>
<div class="math notranslate nohighlight">
\[
 \mathbf{A} = (Q,q_0,\delta : Q \times [1,d] \to Q, \mathtt{Safe}[ \mathfrak{c}_\mathbf{A}]),
\]</div>
<p>where <span class="math notranslate nohighlight">\(\mathfrak{c}_\mathbf{A} : Q \times [1,d] \to  \left\{  \textrm{Win \right\}, \textrm{Lose}}\)</span>.
A word <span class="math notranslate nohighlight">\(w \in [1,d]^\omega\)</span> is accepted if the run <span class="math notranslate nohighlight">\(\rho\)</span> over <span class="math notranslate nohighlight">\(w\)</span> only contains transitions in <span class="math notranslate nohighlight">\(\textrm{Win}\)</span>.
We use the following simplifying convention for safety automata: we distinguish a special rejecting state <span class="math notranslate nohighlight">\(\bot\)</span>
and assume that all transitions are accepting except the ones leading to <span class="math notranslate nohighlight">\(\bot\)</span>.
Said differently, a word <span class="math notranslate nohighlight">\(w\)</span> is accepted if and only if it the run over <span class="math notranslate nohighlight">\(w\)</span> does not contain the state <span class="math notranslate nohighlight">\(\bot\)</span>.
Hence we do not need to specify <span class="math notranslate nohighlight">\(\mathfrak{c}_\mathbf{A}\)</span>:
in the next two sections by an automaton we mean a deterministic safety automaton
given by <span class="math notranslate nohighlight">\(\mathbf{A} = (Q,q_0,\delta : Q \times [1,d] \to Q)\)</span>.</p>
<p>Let us now give a sufficient condition for the automaton <span class="math notranslate nohighlight">\(\mathbf{A}\)</span>
to imply the correctness of the reduction from the parity game <span class="math notranslate nohighlight">\(\mathcal{G}\)</span> to the safety game <span class="math notranslate nohighlight">\(\mathcal{G} \times  \mathbf{A}\)</span>.
The condition that we define now is that the automaton <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> is <span class="math notranslate nohighlight">\((n,d)\)</span>-separating; it relies on the notion of parity graphs.
Recall a parity graph satisfies parity from <span class="math notranslate nohighlight">\(v\)</span> if all infinite paths from <span class="math notranslate nohighlight">\(v\)</span> satisfy parity,
and that a strategy <span class="math notranslate nohighlight">\(\sigma\)</span> is winning from <span class="math notranslate nohighlight">\(v\)</span> if and only if the parity graph <span class="math notranslate nohighlight">\(\mathcal{G}[\sigma]\)</span> satisfies parity from <span class="math notranslate nohighlight">\(v\)</span>.</p>
<p>We say that an automaton reads, accepts, or rejects a path <span class="math notranslate nohighlight">\(\pi\)</span> in a parity graph,
which is an abuse because what the automaton reads is the induced sequence of colours <span class="math notranslate nohighlight">\(\mathfrak{c}(\pi)\)</span>.</p>
<div class="proof definition admonition" id="3-def:separating_automata">
<p class="admonition-title"><span class="caption-number">Definition 80 </span> (Separating automata)</p>
<div class="definition-content section" id="proof-content">
<p>An automaton <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> is <span class="math notranslate nohighlight">\((n,d)\)</span>-<strong>separating</strong> if the two following properties hold.</p>
<ul class="simple">
<li><p>For all parity graphs <span class="math notranslate nohighlight">\(G\)</span> with <span class="math notranslate nohighlight">\(n\)</span> vertices and priorities in <span class="math notranslate nohighlight">\([1,d]\)</span> satisfying parity from <span class="math notranslate nohighlight">\(v\)</span>,
all paths from <span class="math notranslate nohighlight">\(v\)</span> are accepted by <span class="math notranslate nohighlight">\(\mathbf{A}\)</span>.</p></li>
<li><p>All words accepted by <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> satisfy parity.</p></li>
</ul>
</div>
</div><p>We define the objective <span class="math notranslate nohighlight">\(\mathtt{Parity}_{\mid n}\)</span> over the set of colours <span class="math notranslate nohighlight">\([1,d]\)</span> as:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
 \mathtt{Parity}_{\mid n} = 
 \left\{   \pi : 
\begin{array \right\}{l}
 \pi \text{ is a path starting from some vertex $v$ in some parity graph} \\
\text{with } n \text{ vertices and priorities in } [1,d] \text{ satisfying }  \mathtt{Parity} \text{ from } v
\end{array}}.
\end{split}\]</div>
<p>The definition of <span class="math notranslate nohighlight">\((n,d)\)</span>-separating automata is illustrated in <a class="reference internal" href="#fig-separation"><span class="std std-numref">Fig. 23</span></a> and can be summarised
as <span class="math notranslate nohighlight">\(\mathtt{Parity}_{\mid n} \subseteq L( \mathbf{A}) \subseteq  \mathtt{Parity}\)</span>.</p>
<div class="figure align-center" id="fig-separation">
<img alt="3_Parity/./../FigAndAlgos/3-fig:separation.png" src="3_Parity/./../FigAndAlgos/3-fig:separation.png" />
<p class="caption"><span class="caption-number">Fig. 23 </span><span class="caption-text">The separation problem.</span><a class="headerlink" href="#fig-separation" title="Permalink to this image">¶</a></p>
</div>
<p>The following lemma shows the definition of separating automata in action.</p>
<div class="proof lemma admonition" id="3-lem:separating_automata">
<p class="admonition-title"><span class="caption-number">Lemma 81 </span> (Game equivalence using separating automata)</p>
<div class="lemma-content section" id="proof-content">
<p>Let <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> an <span class="math notranslate nohighlight">\((n,d)\)</span>-separating automaton.
Then for all parity games <span class="math notranslate nohighlight">\(\mathcal{G} = ( \mathcal{A}, \mathtt{Parity}[ \mathfrak{c}])\)</span> with <span class="math notranslate nohighlight">\(n\)</span> vertices and priorities in <span class="math notranslate nohighlight">\([1,d]\)</span>,
we have</p>
<div class="math notranslate nohighlight">
\[
 W_\mathrm{Eve}( \mathcal{G}) =  W_\mathrm{Eve}( \mathcal{A},L( \mathbf{A})[ \mathfrak{c}]).
\]</div>
</div>
</div><div class="dropdown tip admonition">
<p class="admonition-title">Proof</p>
<p>The inclusion <span class="math notranslate nohighlight">\(W_\mathrm{Eve}( \mathcal{G}) \subseteq  W_\mathrm{Eve}( \mathcal{A},L( \mathbf{A})[ \mathfrak{c}])\)</span> follows from positional determinacy and the inclusion
<span class="math notranslate nohighlight">\(\mathtt{Parity}_{\mid n} \subseteq L( \mathbf{A})\)</span>.
Let <span class="math notranslate nohighlight">\(v \in  W_\mathrm{Eve}( \mathcal{G})\)</span>.
Consider <span class="math notranslate nohighlight">\(\sigma\)</span> a positional strategy ensuring parity from <span class="math notranslate nohighlight">\(v\)</span> and construct the parity graph <span class="math notranslate nohighlight">\(\mathcal{G}[\sigma]\)</span>, it satisfies parity from <span class="math notranslate nohighlight">\(v\)</span>.
Hence the strategy <span class="math notranslate nohighlight">\(\sigma\)</span> also ensures <span class="math notranslate nohighlight">\(L( \mathbf{A})[ \mathfrak{c}]\)</span> from <span class="math notranslate nohighlight">\(v\)</span>, so <span class="math notranslate nohighlight">\(v \in  W_\mathrm{Eve}( \mathcal{A},L( \mathbf{A})[ \mathfrak{c}])\)</span>.</p>
<p>Conversely, the inclusion <span class="math notranslate nohighlight">\(L( \mathbf{A}) \subseteq  \mathtt{Parity}\)</span> implies the inclusion
<span class="math notranslate nohighlight">\(L( \mathbf{A})[ \mathfrak{c}] \subseteq  \mathtt{Parity}[ \mathfrak{c}]\)</span>, which in turn implies
<span class="math notranslate nohighlight">\(W_\mathrm{Eve}( \mathcal{A},L( \mathbf{A})[ \mathfrak{c}]) \subseteq  W_\mathrm{Eve}( \mathcal{G})\)</span>.</p>
</div>
<p>The last step is to explain how to solve a game with objective <span class="math notranslate nohighlight">\(L( \mathbf{A})\)</span>, as already discussed in Section <a class="reference internal" href="../1_Introduction/reductions.html#sec-reductions"><span class="std std-ref">Reductions</span></a>.
Let <span class="math notranslate nohighlight">\(\mathcal{G} = ( \mathcal{A}, L( \mathbf{A})[ \mathfrak{c}])\)</span>.
We construct a safety game by making the synchronised product of the arena with the automaton:</p>
<div class="math notranslate nohighlight">
\[
  \mathcal{G} \times  \mathbf{A} = ( \mathcal{A} \times  \mathbf{A},  \mathtt{Safe}[ \mathfrak{c}']),
\]</div>
<p>where the safety condition ensures that the play is accepted by <span class="math notranslate nohighlight">\(\mathbf{A}\)</span>.
Formally, we construct the arena <span class="math notranslate nohighlight">\(\mathcal{A} \times  \mathbf{A}\)</span> as follows.
We first define the graph <span class="math notranslate nohighlight">\(G \times Q\)</span> whose set of vertices is <span class="math notranslate nohighlight">\(V \times Q\)</span> and set of edges is defined as follows:
for every edge <span class="math notranslate nohighlight">\((v,v') \in E\)</span> and state <span class="math notranslate nohighlight">\(q \in Q\)</span> there is an edge from <span class="math notranslate nohighlight">\((v,q)\)</span> to <span class="math notranslate nohighlight">\((v',\delta(q, \mathfrak{c}(u)))\)</span>.
The arena is <span class="math notranslate nohighlight">\(\mathcal{A} \times  \mathbf{A} = (G \times Q,  V_\mathrm{Eve} \times Q,  V_\mathrm{Adam} \times Q)\)</span>.
Using the convention for safety automata that the rejecting transitions are precisely those leading to the rejecting state <span class="math notranslate nohighlight">\(\bot\)</span>,
the colouring function is defined by <span class="math notranslate nohighlight">\(\mathfrak{c}'(v,q) =  \textrm{Win}\)</span> if <span class="math notranslate nohighlight">\(q \neq \bot\)</span>, and <span class="math notranslate nohighlight">\(\textrm{Lose}\)</span> otherwise.</p>
<div class="proof observation admonition" id="3-fact:reduction">
<p class="admonition-title"><span class="caption-number">Observation 82 </span> (Reduction to safety games using separating automata)</p>
<div class="observation-content section" id="proof-content">
<p>Eve has a winning strategy in <span class="math notranslate nohighlight">\(\mathcal{G}\)</span> from <span class="math notranslate nohighlight">\(v_0\)</span> if and only if
she has a winning strategy in <span class="math notranslate nohighlight">\(\mathcal{G} \times  \mathbf{A}\)</span> from <span class="math notranslate nohighlight">\((v_0,q_0)\)</span>.</p>
</div>
</div><div class="proof theorem admonition" id="3-thm:algorithm_separating_automata">
<p class="admonition-title"><span class="caption-number">Theorem 83 </span> (Algorithm using separating automata)</p>
<div class="theorem-content section" id="proof-content">
<p>Let <span class="math notranslate nohighlight">\(\mathbf{A}\)</span> an <span class="math notranslate nohighlight">\((n,d)\)</span>-separating automaton.
There exists an algorithm for solving parity games of complexity <span class="math notranslate nohighlight">\(O(m \cdot | \mathbf{A}|)\)</span>.</p>
</div>
</div><div class="dropdown tip admonition">
<p class="admonition-title">Proof</p>
<p>Let <span class="math notranslate nohighlight">\(\mathcal{G}\)</span> a parity game with <span class="math notranslate nohighlight">\(n\)</span> vertices and priorities in <span class="math notranslate nohighlight">\([1,d]\)</span>.
Thanks to <a class="reference internal" href="#3-lem:separating_automata">Lemma 81</a> and <a class="reference internal" href="#3-fact:reduction">Observation 82</a>, solving <span class="math notranslate nohighlight">\(\mathcal{G}\)</span>
is equivalent to solving the safety game <span class="math notranslate nohighlight">\(\mathcal{G} \times  \mathbf{A}\)</span>.
Thanks to <a class="reference internal" href="../2_Regular/attractors.html#2-thm:reachability">Theorem 39</a> solving safety games can be done in time linear in the number of edges.
This yields an algorithm for solving parity games whose running time is <span class="math notranslate nohighlight">\(O(m \cdot | \mathbf{A}|)\)</span>.</p>
</div>
<p>In the remainder of this section we give a construction for a quasipolynomial <span class="math notranslate nohighlight">\((n,d)\)</span>-separating automaton.</p>
</div>
<div class="section" id="the-original-separating-automaton">
<h2>The original separating automaton<a class="headerlink" href="#the-original-separating-automaton" title="Permalink to this headline">¶</a></h2>
<div class="proof theorem admonition" id="3-thm:original_separating_automaton">
<p class="admonition-title"><span class="caption-number">Theorem 84 </span> (The original separating automaton)</p>
<div class="theorem-content section" id="proof-content">
<p>There exists an <span class="math notranslate nohighlight">\((n,d)\)</span>-separating automaton of size <span class="math notranslate nohighlight">\(n^{O(\log d)}\)</span>,
inducing an algorithm for solving parity games of complexity <span class="math notranslate nohighlight">\(n^{O(\log d)}\)</span>.</p>
</div>
</div><blockquote>
<div><p><strong><span class="math notranslate nohighlight">\(i\)</span>-sequences.</strong></p>
</div></blockquote>
<p>The key definition used by the original separating automaton is an
<strong><span class="math notranslate nohighlight">\(i\)</span>-sequence</strong>. Let <span class="math notranslate nohighlight">\(\pi = p_1, p_2, \dots, p_t\)</span> a finite sequence of
priorities. An <span class="math notranslate nohighlight">\(i\)</span>-sequence is a set of <strong>indices</strong> that splits <span class="math notranslate nohighlight">\(\pi\)</span> into
sub-sequences. An <span class="math notranslate nohighlight">\(i\)</span>-sequence consists of exactly <span class="math notranslate nohighlight">\(2^i\)</span> indices <span class="math notranslate nohighlight">\(1 \le j_1 &lt;
j_2 &lt; \dots &lt; j_{2^i} \le t\)</span>, where each <span class="math notranslate nohighlight">\(j_k\)</span> is an integer that refers to the
priority <span class="math notranslate nohighlight">\(p_{j_k}\)</span> from the sequence <span class="math notranslate nohighlight">\(\pi\)</span>. An <span class="math notranslate nohighlight">\(i\)</span>-sequence is required to
satisfy the following properties.</p>
<ul class="simple">
<li><p><strong>Evenness.</strong> Each
index (except possibly the last index) refers to an even priority, meaning that
<span class="math notranslate nohighlight">\(p_{j_k}\)</span> is an even priority for all <span class="math notranslate nohighlight">\(k &lt; 2^i\)</span>.</p></li>
<li><p><strong>Inner domination.</strong> The subsequence of priorities between any two
indices <span class="math notranslate nohighlight">\(j_k\)</span> and <span class="math notranslate nohighlight">\(j_{k+1}\)</span> is dominated by either <span class="math notranslate nohighlight">\(p_{j_k}\)</span> or <span class="math notranslate nohighlight">\(p_{j_{k+1}}\)</span>.
Formally, this means that whenever <span class="math notranslate nohighlight">\(j_k &lt; l &lt; j_{k+1}\)</span>, we have that <span class="math notranslate nohighlight">\(p_l \le
p_{j_k}\)</span> or we have that <span class="math notranslate nohighlight">\(p_l \le p_{j_{k+1}}\)</span>.</p></li>
<li><p><strong>Outer domination.</strong> The final subsequence between <span class="math notranslate nohighlight">\(p_{j_{2^i}}\)</span> and
<span class="math notranslate nohighlight">\(p_t\)</span> is dominated by <span class="math notranslate nohighlight">\(p_{j_{2^i}}\)</span>, meaning that for all <span class="math notranslate nohighlight">\(l &gt; j_{2^i}\)</span> we have
<span class="math notranslate nohighlight">\(p_l \le p_{j_{2^i}}\)</span>.</p></li>
</ul>
<div class="figure align-center" id="fig-isequence">
<img alt="../_images/3-fig:isequence.png" src="../_images/3-fig:isequence.png" />
<p class="caption"><span class="caption-number">Fig. 24 </span><span class="caption-text">A <span class="math notranslate nohighlight">\(2\)</span>-sequence.</span><a class="headerlink" href="#fig-isequence" title="Permalink to this image">¶</a></p>
</div>
<p><a class="reference internal" href="#fig-isequence"><span class="std std-numref">Fig. 24</span></a> gives an example of a <span class="math notranslate nohighlight">\(2\)</span>-sequence. The circled
priorities are the indices used in the sequence. Note that there are exactly
<span class="math notranslate nohighlight">\(2^2 = 4\)</span> indices used, and that every circled priority is even. Inner
domination is satisfied because every priority that is between two circled
priorities is lower than one of the two end points, and outer domination is
satisfied because the final circled priority <span class="math notranslate nohighlight">\(8\)</span> is larger than all the
priorities that come after it.</p>
<blockquote>
<div><p><strong>The relationship to parity games.</strong></p>
</div></blockquote>
<p>The relationship between <span class="math notranslate nohighlight">\(i\)</span>-sequences and parity games is explained by the
following lemma.</p>
<div class="proof lemma admonition" id="3-lem:isequencewin">
<p class="admonition-title"><span class="caption-number">Lemma 85 </span> (Completeness for the separating automaton)</p>
<div class="lemma-content section" id="proof-content">
<p>Suppose that Adam and Eve play positional strategies in the parity game,
and let <span class="math notranslate nohighlight">\(\pi\)</span> the resulting play.</p>
<ul class="simple">
<li><p>If Eve wins the parity game, then there exists prefixes of <span class="math notranslate nohighlight">\(\pi\)</span> that
contain arbitrarily long <span class="math notranslate nohighlight">\(i\)</span>-sequences.</p></li>
<li><p>If Adam wins the parity game, then no prefix of <span class="math notranslate nohighlight">\(\pi\)</span> will contain a
<span class="math notranslate nohighlight">\(\lceil \log n \rceil\)</span>-sequence.</p></li>
</ul>
</div>
</div><div class="dropdown tip admonition">
<p class="admonition-title">Proof</p>
<p>If Eve wins the parity game then the largest
priority occurring in <span class="math notranslate nohighlight">\(\pi\)</span> infinitely often is even. Let <span class="math notranslate nohighlight">\(p\)</span> this priority.
To construct a prefix containing an <span class="math notranslate nohighlight">\(i\)</span>-sequence, we find the first index <span class="math notranslate nohighlight">\(j\)</span>
after which no priority <span class="math notranslate nohighlight">\(q &gt; p\)</span> is seen. We take as our indices <span class="math notranslate nohighlight">\(j_1 &lt; j_2 &lt;
\dots &lt; j_{2^i}\)</span> the first <span class="math notranslate nohighlight">\(2^i\)</span> occurrences of priority <span class="math notranslate nohighlight">\(p\)</span> after index <span class="math notranslate nohighlight">\(j\)</span>.
Evenness is trivially satisfied, and both inner and outer domination are
satisfied because no priority larger than <span class="math notranslate nohighlight">\(p\)</span> is seen after index <span class="math notranslate nohighlight">\(j\)</span>.</p>
<p>We prove the second claim by contradiction. Suppose that Adam wins the game, but
that there is a prefix of <span class="math notranslate nohighlight">\(\pi\)</span> that contains a <span class="math notranslate nohighlight">\(\lceil \log n \rceil\)</span>-sequence.
Since the sequence indexes <span class="math notranslate nohighlight">\(2^{\lceil \log n \rceil} \ge n\)</span> vertices of the
game, it must index the same vertex <span class="math notranslate nohighlight">\(v\)</span> twice. Thus our <span class="math notranslate nohighlight">\(i\)</span>-sequence must
contain a cycle passing through <span class="math notranslate nohighlight">\(v\)</span>. Note that inner domination ensures that the
largest priority on the cycle that passes through <span class="math notranslate nohighlight">\(v\)</span> is even. However, no even
cycle can be formed when Adam wins the game by playing a positional winning
strategy, and so we have arrived at our contradiction.</p>
</div>
<p>To summarise, if Eve wins the game, then she has a strategy that ensures that
arbitrarily long <span class="math notranslate nohighlight">\(i\)</span>-sequences occur, while if Adam wins the game then he has a
strategy that ensures that no <span class="math notranslate nohighlight">\(\lceil \log n \rceil\)</span>-sequence occurs. So to
solve the parity game, it is sufficient to determine whether Eve can force a
<span class="math notranslate nohighlight">\(\lceil \log n \rceil\)</span>-sequence to occur.</p>
<blockquote>
<div><p><strong>A data structure for recognising <span class="math notranslate nohighlight">\(i\)</span>-sequences.</strong></p>
</div></blockquote>
<p>We will build a quasi-polynomial sized automaton that reads a sequence of
priorities,
and determines whether that sequence of priorities contains a
<span class="math notranslate nohighlight">\(k\)</span>-sequence.
The automaton is defined by a data structure that we call a <strong>record</strong>, which
contains information about the <span class="math notranslate nohighlight">\(i\)</span>-sequences that have been seen so far in the
sequence.</p>
<p>A record is a sequence <span class="math notranslate nohighlight">\(b_k, b_{k-1}, \dots, b_1, b_0\)</span>, where each
<span class="math notranslate nohighlight">\(b_i\)</span> is either a priority, or the special symbol <span class="math notranslate nohighlight">\(\mathtt{-}\)</span>. The value of <span class="math notranslate nohighlight">\(b_i\)</span>
has the following meaning:</p>
<ul class="simple">
<li><p><strong>Witnessing.</strong> If <span class="math notranslate nohighlight">\(b_i \ne  \mathtt{-}\)</span>, then we have seen an
<span class="math notranslate nohighlight">\(i\)</span>-sequence, and the final priority on that <span class="math notranslate nohighlight">\(i\)</span>-sequence is <span class="math notranslate nohighlight">\(b_i\)</span>.</p></li>
<li><p><strong>Order.</strong> If <span class="math notranslate nohighlight">\(b_i \ne  \mathtt{-}\)</span> and <span class="math notranslate nohighlight">\(b_j \ne  \mathtt{-}\)</span> and <span class="math notranslate nohighlight">\(j &lt; i\)</span>,
then the first index of the <span class="math notranslate nohighlight">\(j\)</span>-sequence witnessed by <span class="math notranslate nohighlight">\(b_j\)</span> occurs after the
last index of the <span class="math notranslate nohighlight">\(i\)</span>-sequence witnessed by <span class="math notranslate nohighlight">\(b_i\)</span>.</p></li>
</ul>
<p>Note that, although each element <span class="math notranslate nohighlight">\(b_i\)</span> records the existence of an
<span class="math notranslate nohighlight">\(i\)</span>-sequence, the record data structure <strong>does not</strong> store the <span class="math notranslate nohighlight">\(2^i\)</span> indices
of this <span class="math notranslate nohighlight">\(i\)</span>-sequence, it only stores the priority of the final index of that
sequence.</p>
<div class="figure align-center" id="fig-ds">
<img alt="../_images/3-fig:ds.png" src="../_images/3-fig:ds.png" />
<p class="caption"><span class="caption-number">Fig. 25 </span><span class="caption-text">An example sequence that corresponds to the record <span class="math notranslate nohighlight">\(\mathtt{-} 8 4 2\)</span>.</span><a class="headerlink" href="#fig-ds" title="Permalink to this image">¶</a></p>
</div>
<p><a class="reference internal" href="#fig-ds"><span class="std std-numref">Fig. 25</span></a> shows an example sequence that is consistent with the
record that sets <span class="math notranslate nohighlight">\(b_3 =  \mathtt{-}\)</span>, <span class="math notranslate nohighlight">\(b_2 = 8\)</span>, <span class="math notranslate nohighlight">\(b_1 = 4\)</span>, and <span class="math notranslate nohighlight">\(b_0 = 2\)</span>.
The red <span class="math notranslate nohighlight">\(2\)</span>-sequence is represented by <span class="math notranslate nohighlight">\(b_2 = 8\)</span>, which is the last priority of
the <span class="math notranslate nohighlight">\(2\)</span>-sequence. The blue <span class="math notranslate nohighlight">\(1\)</span>-sequence starts after the end of the
<span class="math notranslate nohighlight">\(2\)</span>-sequence, and it is represented by <span class="math notranslate nohighlight">\(b_1 = 4\)</span>. Likewise the grey
<span class="math notranslate nohighlight">\(0\)</span>-sequence starts after the end of the <span class="math notranslate nohighlight">\(1\)</span>-sequence, and is represented by
<span class="math notranslate nohighlight">\(b_0 = 2\)</span>. There is no <span class="math notranslate nohighlight">\(3\)</span>-sequence in the example, and this is represented by
setting <span class="math notranslate nohighlight">\(b_3 =  \mathtt{-}\)</span>.</p>
<blockquote>
<div><p><strong>The update rule.</strong></p>
</div></blockquote>
<p>Suppose that we have a record that represents the <span class="math notranslate nohighlight">\(i\)</span>-sequences in a
finite sequence of priorities, and that we then read the next priority <span class="math notranslate nohighlight">\(p\)</span> in
that sequence. We need to update the record to take this priority into
account. We do this by applying the following <strong>update rule</strong>.
The update rule consists of two steps, which occur one after the other.</p>
<ul class="simple">
<li><p><strong>Step 1.</strong> In this step, we find the largest index <span class="math notranslate nohighlight">\(i\)</span>
such that <span class="math notranslate nohighlight">\(b_j\)</span> is even for all <span class="math notranslate nohighlight">\(j \le i\)</span>. If <span class="math notranslate nohighlight">\(b_i =  \mathtt{-}\)</span>, or <span class="math notranslate nohighlight">\(b_i &lt; p\)</span>,
then we create a new record <span class="math notranslate nohighlight">\(b'_k\)</span>, <span class="math notranslate nohighlight">\(b'_{k-1}\)</span>, \dots, <span class="math notranslate nohighlight">\(b'_0\)</span> by
setting:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}b'_j = \begin{cases}
b_j &amp; \text{if $j &gt; i$,} \\
p &amp; \text{if $j = i$,} \\
 \mathtt{-} &amp; \text{if $j &lt; i$.} 
\end{cases}\end{split}\]</div>
<p>If there is no index <span class="math notranslate nohighlight">\(i\)</span> that satisfies the conditions, then we do not modify
the record.</p>
<ul class="simple">
<li><p><strong>Step 2.</strong> In step 2, we take the output of step 1, and we find the
largest index <span class="math notranslate nohighlight">\(i\)</span> such that <span class="math notranslate nohighlight">\(p &gt; b_i\)</span> and we create a new record <span class="math notranslate nohighlight">\(b'_k\)</span>,
<span class="math notranslate nohighlight">\(b'_{k-1}\)</span>, \dots, <span class="math notranslate nohighlight">\(b'_0\)</span> by setting:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}b'_j = \begin{cases}
b_j &amp; \text{if $j &gt; i$,} \\
p &amp; \text{if $j = i$,} \\
 \mathtt{-} &amp; \text{if $j &lt; i$.} 
\end{cases}\end{split}\]</div>
<p>Again, if there is no such index <span class="math notranslate nohighlight">\(i\)</span>, then the record is not modified.</p>
<div class="figure align-center" id="fig-ds1">
<img alt="../_images/3-fig:ds1.png" src="../_images/3-fig:ds1.png" />
<p class="caption"><span class="caption-number">Fig. 26 </span><span class="caption-text">An example of a Step 1 update applied to the sequence and record from <a class="reference internal" href="#fig-ds"><span class="std std-numref">Fig. 25</span></a></span><a class="headerlink" href="#fig-ds1" title="Permalink to this image">¶</a></p>
</div>
<p>Intuitively, Step 1 attempts to combine the <span class="math notranslate nohighlight">\(i\)</span>-sequences in the existing record
into a longer <span class="math notranslate nohighlight">\(i\)</span>-sequence. Suppose that we have read the sequence shown in <a class="reference internal" href="#fig-ds"><span class="std std-numref">Fig. 25</span></a>,
that we have compute the record <span class="math notranslate nohighlight">\(\mathtt{-} 8 4 2\)</span>, and that the next priority in the sequence is <span class="math notranslate nohighlight">\(4\)</span>.
<a class="reference internal" href="#fig-ds1"><span class="std std-numref">Fig. 26</span></a> shows the result of applying Step 1 to this situation.
Observe that <span class="math notranslate nohighlight">\(3\)</span> is the largest index <span class="math notranslate nohighlight">\(i\)</span> such that for all <span class="math notranslate nohighlight">\(j &lt; i\)</span> we have that
<span class="math notranslate nohighlight">\(b_j\)</span> is even, so Step 1 will output the record <span class="math notranslate nohighlight">\(4  \mathtt{-}  \mathtt{-}  \mathtt{-}\)</span>.</p>
<p>So in this circumstance, Step 1 claims that we have now seen a <span class="math notranslate nohighlight">\(3\)</span>-sequence.
<a class="reference internal" href="#fig-ds1"><span class="std std-numref">Fig. 26</span></a> shows why this is correct: the <span class="math notranslate nohighlight">\(0\)</span>-sequence of <span class="math notranslate nohighlight">\(b_0\)</span>, the
<span class="math notranslate nohighlight">\(1\)</span>-sequence of <span class="math notranslate nohighlight">\(b_1\)</span>, and the <span class="math notranslate nohighlight">\(2\)</span>-sequence of <span class="math notranslate nohighlight">\(b_2\)</span> can be merged together,
along with the new priority, to create a <span class="math notranslate nohighlight">\(3\)</span>-sequence. Observe that inner
domination in this new <span class="math notranslate nohighlight">\(3\)</span>-sequence is satisfied due to the outer domination
property for each of the <span class="math notranslate nohighlight">\(i\)</span>-sequences that it was constructed from.
For example, the <span class="math notranslate nohighlight">\(2\)</span>-sequence ends at priority <span class="math notranslate nohighlight">\(8\)</span>, and the <span class="math notranslate nohighlight">\(1\)</span>-sequence begins
at priority <span class="math notranslate nohighlight">\(2\)</span>, and we know that <span class="math notranslate nohighlight">\(8\)</span> must dominate all priorities between the
<span class="math notranslate nohighlight">\(8\)</span> and the <span class="math notranslate nohighlight">\(2\)</span> because <span class="math notranslate nohighlight">\(8\)</span> is required to dominate <strong>all</strong> priorities that
follow it.</p>
<div class="figure align-center" id="fig-ds2">
<img alt="../_images/3-fig:ds2.png" src="../_images/3-fig:ds2.png" />
<p class="caption"><span class="caption-number">Fig. 27 </span><span class="caption-text">An example of a Step 2 update applied to the sequence and record from <a class="reference internal" href="#fig-ds"><span class="std std-numref">Fig. 25</span></a></span><a class="headerlink" href="#fig-ds2" title="Permalink to this image">¶</a></p>
</div>
<p>Step 2 ensures that the outer domination property holds.
In <a class="reference internal" href="#fig-ds2"><span class="std std-numref">Fig. 27</span></a>, we show the result of applying Step 2 to the record
<span class="math notranslate nohighlight">\(\mathtt{-} 8 4 2\)</span> that corresponds to the sequence shown in <a class="reference internal" href="#fig-ds"><span class="std std-numref">Fig. 25</span></a>,
when the next priority in the sequence is <span class="math notranslate nohighlight">\(9\)</span>. Observe that since <span class="math notranslate nohighlight">\(9 &gt; 8\)</span>, the
outer domination property for the <span class="math notranslate nohighlight">\(2\)</span>-sequence ending at <span class="math notranslate nohighlight">\(8\)</span> now fails to hold,
and likewise for the sequences ending at <span class="math notranslate nohighlight">\(4\)</span> and <span class="math notranslate nohighlight">\(2\)</span>. Hence, Step 2 deletes the
<span class="math notranslate nohighlight">\(0\)</span>-sequence and <span class="math notranslate nohighlight">\(1\)</span>-sequence from the record, and updates the <span class="math notranslate nohighlight">\(2\)</span>-sequence to
end at <span class="math notranslate nohighlight">\(9\)</span>, thereby restoring outer domination. The resulting record is <span class="math notranslate nohighlight">\(\mathtt{-}
9  \mathtt{-}  \mathtt{-}\)</span>.</p>
<blockquote>
<div><p><strong>Correctness.</strong></p>
</div></blockquote>
<p>To compute a record for a particular sequence of priorities, we start with the
record <span class="math notranslate nohighlight">\(\mathtt{-}  \mathtt{-} \dots  \mathtt{-}\)</span>, and then process the sequence one
priority at a time, using the update rule that we have described.</p>
<p>We must now argue that the record data structure and update rule is sufficient
to decide the winner of a parity game. The following lemma states that a record
will never falsely claim that an <span class="math notranslate nohighlight">\(i\)</span>-sequence has occurred.</p>
<div class="proof lemma admonition" id="3-lem:correctness_separating_automata">
<p class="admonition-title"><span class="caption-number">Lemma 86 </span> (Correctness for the separating automaton)</p>
<div class="lemma-content section" id="proof-content">
<p>Let <span class="math notranslate nohighlight">\(b_k, b_{k-1}, \dots, b_0\)</span> the record for a sequence of priorities <span class="math notranslate nohighlight">\(\pi\)</span>.
If <span class="math notranslate nohighlight">\(b_i \ne  \mathtt{-}\)</span>, then <span class="math notranslate nohighlight">\(\pi\)</span> contains an <span class="math notranslate nohighlight">\(i\)</span>-sequence.</p>
</div>
</div><div class="dropdown tip admonition">
<p class="admonition-title">Proof</p>
<p>This can be proved by induction over the components of the record. In fact we
will prove the slightly stronger order property that we mentioned earlier:
the <span class="math notranslate nohighlight">\(i\)</span>-sequence corresponding to
<span class="math notranslate nohighlight">\(b_i\)</span> starts after the <span class="math notranslate nohighlight">\(j\)</span> sequence corresponding to <span class="math notranslate nohighlight">\(b_j\)</span> whenever <span class="math notranslate nohighlight">\(i &lt; j\)</span> and
<span class="math notranslate nohighlight">\(b_i \ne  \mathtt{-}\)</span> and <span class="math notranslate nohighlight">\(b_j \ne  \mathtt{-}\)</span>.</p>
<p>The base case is trivially true, since the value of <span class="math notranslate nohighlight">\(b_0\)</span> asserts the existence
of a 0-sequence, and any priority by itself is a <span class="math notranslate nohighlight">\(0\)</span>-sequence. So when Step 1 or
Step 2 updates <span class="math notranslate nohighlight">\(b_0\)</span>, the corresponding <span class="math notranslate nohighlight">\(0\)</span>-sequence is the new priority, and
this clearly starts after all other <span class="math notranslate nohighlight">\(i\)</span>-sequences in the record.</p>
<p>For the inductive step, we must prove that the two steps of the update rule are
correct.</p>
<ul class="simple">
<li><p>For Step 1 updates, we can use the inductive hypothesis to argue that, for
each <span class="math notranslate nohighlight">\(j &lt; i\)</span>, the <span class="math notranslate nohighlight">\(j\)</span>-sequence corresponding to <span class="math notranslate nohighlight">\(b_j\)</span> exists, and that they
appear in order in the sequence, and that it ends before the sequence
corresponding to <span class="math notranslate nohighlight">\(b_{j-1}\)</span> starts. Furthermore, the outer domination property
the <span class="math notranslate nohighlight">\(j\)</span>-sequence ensures that all priorities between the end of the
<span class="math notranslate nohighlight">\(j\)</span>-sequence and the start of the <span class="math notranslate nohighlight">\((j-1)\)</span>-sequence are dominated by the last
priority in the <span class="math notranslate nohighlight">\(j\)</span>-sequence, which must be even according to the definition of
a Step 1 update.
Hence, we can combine all of the <span class="math notranslate nohighlight">\(j\)</span>-sequences with <span class="math notranslate nohighlight">\(j &lt; i\)</span> together, along with
the new priority, to create an <span class="math notranslate nohighlight">\(i\)</span>-sequence. This new <span class="math notranslate nohighlight">\(i\)</span>-sequence starts at
exactly the same point as the sequence corresponding to <span class="math notranslate nohighlight">\(b_{i-1}\)</span>, and so the
order property still holds.</p></li>
<li><p>For Step 2 updates, we only need to argue that the value of <span class="math notranslate nohighlight">\(b'_i\)</span>
correspond to an <span class="math notranslate nohighlight">\(i\)</span> sequence. This can be constructed as we showed in <a class="reference internal" href="#fig-ds2"><span class="std std-numref">Fig. 27</span></a>:
take the <span class="math notranslate nohighlight">\(i\)</span>-sequence that corresponds to <span class="math notranslate nohighlight">\(b_i\)</span>, and
replace the final priority with the new priority. Observe that the final
priority of an <span class="math notranslate nohighlight">\(i\)</span>-sequence is permitted to be odd, and so this new sequence
satisfies all of the requirements of an <span class="math notranslate nohighlight">\(i\)</span>-sequence. Furthermore, the starting
point of this sequence has not changed, and so the order property is preserved.</p></li>
</ul>
</div>
<p>As a consequence of the lemma above, if Adam has a strategy to ensure that no
<span class="math notranslate nohighlight">\(k\)</span>-sequence occurs in the game, then Adam has a strategy to ensure that the
<span class="math notranslate nohighlight">\(b_k\)</span> component of the record is never set so that <span class="math notranslate nohighlight">\(b_k \ne  \mathtt{-}\)</span>.</p>
<p>It can be shown that the other direction is also true: if an <span class="math notranslate nohighlight">\(i\)</span>-sequence has
occurred, then there will be some index <span class="math notranslate nohighlight">\(j \ge i\)</span> such that <span class="math notranslate nohighlight">\(b_j \ne  \mathtt{-}\)</span>.
However, the proof is somewhat tedious, and this statement is actually stronger
than what we need. To argue that the record can determine the winner of a parity
game, the following weaker lemma suffices.</p>
<div class="proof lemma admonition" id="3-lem:weaker_correctness_separating_automaton">
<p class="admonition-title"><span class="caption-number">Lemma 87 </span> (Weaker correctness for the separating automaton)</p>
<div class="lemma-content section" id="proof-content">
<p>Let <span class="math notranslate nohighlight">\(\pi\)</span> an infinite play that is winning for Eve. For all <span class="math notranslate nohighlight">\(k\)</span>, there exists
a prefix of <span class="math notranslate nohighlight">\(\pi\)</span> such that <span class="math notranslate nohighlight">\(b_k \ne  \mathtt{-}\)</span>.</p>
</div>
</div><div class="dropdown tip admonition">
<p class="admonition-title">Proof</p>
<p>Let <span class="math notranslate nohighlight">\(p\)</span> the largest even priority that is seen infinitely often, and let <span class="math notranslate nohighlight">\(j\)</span>
be the first index after which no priority larger than <span class="math notranslate nohighlight">\(p\)</span> is visited. We argue
that after index <span class="math notranslate nohighlight">\(j\)</span> has been reached, the record will eventually set <span class="math notranslate nohighlight">\(b_i \ne
 \mathtt{-}\)</span> for all <span class="math notranslate nohighlight">\(i\)</span>.</p>
<p>To see why, observe that after index <span class="math notranslate nohighlight">\(j\)</span> has been reached, Step 2 cannot replace
any component <span class="math notranslate nohighlight">\(b_j\)</span> with <span class="math notranslate nohighlight">\(b_j = p\)</span>, since Step 2 can only overwrite the priority
in <span class="math notranslate nohighlight">\(b_j\)</span> when the new priority <span class="math notranslate nohighlight">\(p'\)</span> satisfies <span class="math notranslate nohighlight">\(p' &gt; b_j\)</span>, but no priority <span class="math notranslate nohighlight">\(p' &gt;
p\)</span> is seen after index <span class="math notranslate nohighlight">\(j\)</span>.</p>
<p>On the other hand, Step 1 will always be triggered whenever we visit the
priority <span class="math notranslate nohighlight">\(p\)</span>. Step 1 will always set some component of the record to <span class="math notranslate nohighlight">\(p\)</span>, and as
we have observed this cannot be overwritten by Step 2. Moreover, since <span class="math notranslate nohighlight">\(p\)</span> is
even, repeated application of Step 1 will
build a longer and longer <span class="math notranslate nohighlight">\(i\)</span>-sequences whose outer domination
priority is <span class="math notranslate nohighlight">\(p\)</span>. Thus, after we have made <span class="math notranslate nohighlight">\(2^k\)</span> visits to <span class="math notranslate nohighlight">\(p\)</span>, we will have set
<span class="math notranslate nohighlight">\(b_k = p \ne  \mathtt{-}\)</span>, if we have not done so already.</p>
</div>
<p>Hence, if Eve wins the parity game, then she has a strategy to eventually ensure
that <span class="math notranslate nohighlight">\(b_k \ne  \mathtt{-}\)</span>. Combining the two lemmas above, with <a class="reference internal" href="#3-lem:isequencewin">Lemma 85</a> gives the following corollary.</p>
<div class="proof corollary admonition" id="3-cor:correctness_reduction_separating_automaton">
<p class="admonition-title"><span class="caption-number">Corollary 88 </span> (Correctness of the reduction for the separating automaton)</p>
<div class="corollary-content section" id="proof-content">
<p>Suppose that we monitor the play of a parity game with a record <span class="math notranslate nohighlight">\(b_{\lceil \log
n \rceil}, \dots, b_0\)</span>. Eve has a strategy that ensures <span class="math notranslate nohighlight">\(b_{\lceil \log n
\rceil} \ne  \mathtt{-}\)</span> if and only if Eve wins the parity game.</p>
</div>
</div><blockquote>
<div><p><strong>The size of the automaton.</strong></p>
</div></blockquote>
<p>The record data structure and update rule can be encoded as a deterministic
finite automaton that reads the play. Each state of the automaton is associated
with some configuration of <span class="math notranslate nohighlight">\(b_{\lceil \log n \rceil}, \dots, b_0\)</span>, and the
transitions of the automaton are defined by the update rule.</p>
<p>This automaton has quasipolynomial size. The number of states used in the
automaton is the number of possible configurations of
<span class="math notranslate nohighlight">\(b_{\lceil \log n \rceil}, \dots, b_0\)</span>. Each <span class="math notranslate nohighlight">\(b_i\)</span> can be one of the <span class="math notranslate nohighlight">\(d\)</span>
priorities in the game, or the symbol <span class="math notranslate nohighlight">\(\mathtt{-}\)</span>, and so there are <span class="math notranslate nohighlight">\(d + 1\)</span>
possible values that it can take. Moreover there are <span class="math notranslate nohighlight">\(\log n + 1\)</span> components of
the record, so the total number of configurations is at most
<span class="math notranslate nohighlight">\((d+1)^{\log n +1} = n^{O(\log d)}\)</span>.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./3_Parity"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="zielonka.html" title="previous page">A quasipolynomial time attractor decomposition algorithm</a>
    <a class='right-next' id="next-link" href="value_iteration.html" title="next page">A quasipolynomial time value iteration algorithm</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By a set of authors<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>